<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Accessibility Issue Creator</title>

<link rel="stylesheet" href="css/superfish.css" media="screen">
<style>
#create-issue .issue {display: block;}
</style>

<script src="jquery.min.js"></script>
<script src="hoverIntent.js"></script>
<script src="superfish.min.js"></script>

<script src="debug.js"></script>
<script src="import.js"></script>
<script src="accessible-superfish.js"></script>
<script src="wcag-browser.js"></script>

</head>
<body>
<h1>Issues</h1>
<nav>
<div>
<button id="new" accesskey="n">New Issue</button>
<button id="load" accesskey="l">Load Issues</button>
<button id="save" accesskey="s">Save Issues</button>
<button id="delete" accesskey="d">Delete Issues</button>
</div><div>
<label>Select issue: <select id="issues"></select></label>
</div>
</nav>

<main>

<div id="wcag-browser">
<h2>WCAG-2.0 Browser</h2>
<nav>
<label>Verbosity:
<select id="verbosity">
<option value="0">Principles</option>
<option value="1">Guidelines</option>
<option selected value="2">Criteria</option>
<option value="3">Off</option>
</select></label>

<div id="menu-container">
</div>
</nav>

<div id="text" aria-live="polite">
</div>
</div><!-- #wcag-browser -->

<div id="create-issue" role="region" aria-label="Create issue">
</div>

<div id="issues" role="region" aria-label="Issues">
<table>
</table>
</div>

</main>

<div id="debug" aria-live="polite">
</div>

<script id="issue-display" class="template" type="text/html">
<td data-name="number"></td>
<td data-name="short-description"></td>
<td data-name="guideline "></td>
<td data-name="priority "></td>
<td data-name="full-description"></td>
<td data-name="code-example"><code><pre></pre></code></td>
</script>

<script id="issue-create" class="template" type="text/html">
<span class="issue" data-name="number">
</span><span class="issue">
<label>Short description: <input type="text" data-name=" short-description"></label>
</span><span class="issue">
<label>Guideline: <input type="text" data-name="guideline"></label>
</span><span class="issue">
<label>Priority: <input type="range" data-name="priority" min="1" max="5"></label>
</span><span class="issue">
<label>Full description <textarea data-name="long-description"></textarea></label>
</span><span class="issue">
<label>Code example: <textarea data-name="code-example"></textarea></label>
</span>

<button class="create">Create issue</button>
</script>

<script>
var issueNumber = 0;
displayForm ();

$("#create-issue").on ("click", ".create", function (e) {
issueNumber += 1;
createIssue (issueNumber, getIssueData ( $("[data-name]", "#create-issue") ))
.appendTo ($("#issues > table"));

return false;
}); // create

function createIssue (number, data) {
var $issue = $('<tr class="issue"></tr>');

$(`<td data-name="number">${number}</td>`)
.appendTo ($issue);

for (var name in data) {
$(`<td data-name="${name}">${data[name]}</td>`)
.appendTo ($issue);
} // for

return $issue;
} // createIssue

function displayForm () {
var html = $("#issue-create.template").html();
$("#create-issue").append (html);
} // displayForm

function getIssueData ($issue) {
var issueData = {};
alert (`getIssueData: ${$issue.length}`);

$issue.each (function () {
var name = $(this).attr ("data-name");
issueData[name] = $(this).val();
}); // each

alert (JSON.stringify(issueData));
return issueData;
} // getIssueData

</script>

</body>
</html>
